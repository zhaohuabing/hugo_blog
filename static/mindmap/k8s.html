<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>

</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.6.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.3"></script><script>((e,t,r)=>{const{Markmap:n}=e();window.mm=n.create("svg#mindmap",null==t?void 0:t(),r)})(()=>window.markmap,t=>{return t=t||window.d3,{color:(n=t.scaleOrdinal(t.schemeCategory10),t=>n(t.p.i))};var n},{"t":"list_item","d":2,"p":{"lines":[0,1]},"v":"Kubernetes","c":[{"t":"list_item","d":4,"p":{"lines":[1,2]},"v":"基本理念","c":[{"t":"list_item","d":6,"p":{"lines":[2,3]},"v":"自动化部署，缩扩容和管理容器应用"},{"t":"list_item","d":6,"p":{"lines":[3,4]},"v":"预期状态管理(Desired State Management)","c":[{"t":"list_item","d":8,"p":{"lines":[4,5]},"v":"Kubernetes API 对象（声明预期状态）"},{"t":"list_item","d":8,"p":{"lines":[5,6]},"v":"Kubernetes Control Plane（确保集群当前状态匹配预期状态）","c":[{"t":"list_item","d":10,"p":{"lines":[6,7]},"v":"Kubernetes Master","c":[{"t":"list_item","d":12,"p":{"lines":[7,8]},"v":"kube-apiserver（API Server）","c":[{"t":"list_item","d":14,"p":{"lines":[8,9]},"v":"对外提供各种对象的CRUD REST接口"},{"t":"list_item","d":14,"p":{"lines":[9,10]},"v":"对外提供Watch机制，通知对象变化"},{"t":"list_item","d":14,"p":{"lines":[10,11]},"v":"将对象存储到Etcd中"}]},{"t":"list_item","d":12,"p":{"lines":[11,12]},"v":"kube-controller-manager（守护进程）","c":[{"t":"list_item","d":14,"p":{"lines":[12,13]},"v":"功能：通过apiserver监视集群的状态，并做出相应更改，以使得集群的当前状态向预期状态靠拢"},{"t":"list_item","d":14,"p":{"lines":[13,14]},"v":"controllers","c":[{"t":"list_item","d":16,"p":{"lines":[14,15]},"v":"replication controller"},{"t":"list_item","d":16,"p":{"lines":[15,16]},"v":"endpoints controller"},{"t":"list_item","d":16,"p":{"lines":[16,17]},"v":"namespace controller"},{"t":"list_item","d":16,"p":{"lines":[17,18]},"v":"serviceaccounts controller"},{"t":"list_item","d":16,"p":{"lines":[18,19]},"v":"......"}]}]},{"t":"list_item","d":12,"p":{"lines":[19,20]},"v":"kube-scheduler（调度器）","c":[{"t":"list_item","d":14,"p":{"lines":[20,21]},"v":"功能：将Pod调度到合适的工作节点上运行"},{"t":"list_item","d":14,"p":{"lines":[21,22]},"v":"调度的考虑因素","c":[{"t":"list_item","d":16,"p":{"lines":[22,23]},"v":"资源需求"},{"t":"list_item","d":16,"p":{"lines":[23,24]},"v":"服务治理要求"},{"t":"list_item","d":16,"p":{"lines":[24,25]},"v":"硬件/软件/策略限制"},{"t":"list_item","d":16,"p":{"lines":[25,26]},"v":"亲和以及反亲和要求"},{"t":"list_item","d":16,"p":{"lines":[26,27]},"v":"数据局域性"},{"t":"list_item","d":16,"p":{"lines":[27,28]},"v":"负载间的干扰"},{"t":"list_item","d":16,"p":{"lines":[28,29]},"v":"......"}]}]}]},{"t":"list_item","d":10,"p":{"lines":[29,30]},"v":"Work Node","c":[{"t":"list_item","d":12,"p":{"lines":[30,31]},"v":"Kubelet（节点代理）","c":[{"t":"list_item","d":14,"p":{"lines":[31,32]},"v":"接受通过各种机制（主要是通过apiserver）提供的一组PodSpec"},{"t":"list_item","d":14,"p":{"lines":[32,33]},"v":"确保PodSpec中描述的容器处于运行状态且运行状况良好"}]},{"t":"list_item","d":12,"p":{"lines":[33,34]},"v":"Kube-proxy（节点网络代理）","c":[{"t":"list_item","d":14,"p":{"lines":[34,35]},"v":"在节点上提供Kubernetes API中定义Service"},{"t":"list_item","d":14,"p":{"lines":[35,36]},"v":"设置Service对应的IPtables规则"},{"t":"list_item","d":14,"p":{"lines":[36,37]},"v":"进行流量转发（userspace模式）"}]}]}]}]}]},{"t":"list_item","d":4,"p":{"lines":[37,38]},"v":"部署模式","c":[{"t":"list_item","d":6,"p":{"lines":[38,39]},"v":"Single node"},{"t":"list_item","d":6,"p":{"lines":[39,40]},"v":"Single head node，multiple workers","c":[{"t":"list_item","d":8,"p":{"lines":[40,41]},"v":"API Server，Scheduler，and Controller Manager run on a single node"}]},{"t":"list_item","d":6,"p":{"lines":[41,42]},"v":"Single etcd，HA heade nodes，multiple workers","c":[{"t":"list_item","d":8,"p":{"lines":[42,43]},"v":"Multiple API Server instances fronted by a load balancer"},{"t":"list_item","d":8,"p":{"lines":[43,44]},"v":"Multiple Scheduler and Controller Manager instances with leader election"},{"t":"list_item","d":8,"p":{"lines":[44,45]},"v":"Single etcd node"}]},{"t":"list_item","d":6,"p":{"lines":[45,46]},"v":"HA etcd，HA head nodes，multiple workers","c":[{"t":"list_item","d":8,"p":{"lines":[46,47]},"v":"Multiple API Server instances fronted by a load balancer"},{"t":"list_item","d":8,"p":{"lines":[47,48]},"v":"Multiple Scheduler and Controller Manager instances with leader election"},{"t":"list_item","d":8,"p":{"lines":[48,49]},"v":"Etcd cluster run on nodes seperate from the Kubernetes head nodes"}]},{"t":"list_item","d":6,"p":{"lines":[49,50]},"v":"Kubernetes Federation"}]},{"t":"list_item","d":4,"p":{"lines":[50,51]},"v":"商业模式","c":[{"t":"list_item","d":6,"p":{"lines":[51,52]},"v":"云服务用户：避免使用单一云提供商导致的厂商锁定，避免技术和成本风险"},{"t":"list_item","d":6,"p":{"lines":[52,53]},"v":"云服务厂商：使用Kubernetes来打破AWS的先入垄断地位，抢夺市场份额"}]},{"t":"list_item","d":4,"p":{"lines":[53,54]},"v":"Workload","c":[{"t":"list_item","d":6,"p":{"lines":[54,55]},"v":"Pod","c":[{"t":"list_item","d":8,"p":{"lines":[55,56]},"v":"Smalleset deployable computing unit"},{"t":"list_item","d":8,"p":{"lines":[56,57]},"v":"Consist of one or more containers"},{"t":"list_item","d":8,"p":{"lines":[57,58]},"v":"All containers in a pod share <a href=\"https://kubernetes.io/docs/concepts/storage/volumes/\">storage</a>, <a href=\"https://zhaohuabing.com/post/2020-03-12-linux-network-virtualization/#network-namespace\">network namespacem</a> and <a href=\"https://man7.org/linux/man-pages/man7/cgroups.7.html\">cgroup</a>"}]},{"t":"list_item","d":6,"p":{"lines":[58,59]},"v":"Workload resources(Controllers)","c":[{"t":"list_item","d":8,"p":{"lines":[59,60]},"v":"Deployment &amp; RelicaSet","c":[{"t":"list_item","d":10,"p":{"lines":[60,61]},"v":"Deployment is used to deploy stateless appliations."},{"t":"list_item","d":10,"p":{"lines":[61,62]},"v":"ReplicaSet ensured a specified numbers of pod replicas are running at a given time."},{"t":"list_item","d":10,"p":{"lines":[62,63]},"v":"Deployment is used to rollout/update/rollback ReplicaSet."},{"t":"list_item","d":10,"p":{"lines":[63,64]},"v":"ReplicaSet is not supposed to be used directly, it should be managed by Deployments."}]},{"t":"list_item","d":8,"p":{"lines":[64,65]},"v":"StatefulSet","c":[{"t":"list_item","d":10,"p":{"lines":[65,66]},"v":"StatefulSet is used to deploy stateful applications."},{"t":"list_item","d":10,"p":{"lines":[66,67]},"v":"SetatefSet require a Headless Service to provide network identity for the pods."}]},{"t":"list_item","d":8,"p":{"lines":[67,68]},"v":"DaemonSet","c":[{"t":"list_item","d":10,"p":{"lines":[68,69]},"v":"DaemonSet ensures that all(or some) Nodes run a copy of a Pod."},{"t":"list_item","d":10,"p":{"lines":[69,70]},"v":"Use cases: cluster storage daemon, logs collection daemon, node monitoring daemon."}]},{"t":"list_item","d":8,"p":{"lines":[70,71]},"v":"Job &amp; CronJob","c":[{"t":"list_item","d":10,"p":{"lines":[71,72]},"v":"Job runs pods until a specified number of them have been succcessfully executed."},{"t":"list_item","d":10,"p":{"lines":[72,73]},"v":"CronJob runs a job periodically on a given schedule."}]}]}]},{"t":"list_item","d":4,"p":{"lines":[73,74]},"v":"Storage","c":[{"t":"list_item","d":6,"p":{"lines":[74,75]},"v":"Volume","c":[{"t":"list_item","d":8,"p":{"lines":[75,76]},"v":"purpose","c":[{"t":"list_item","d":10,"p":{"lines":[76,77]},"v":"Persist data across the life span of a Pod","c":[{"t":"list_item","d":12,"p":{"lines":[77,78]},"v":"Data won't lost when a container is restarted"}]},{"t":"list_item","d":10,"p":{"lines":[78,79]},"v":"Share data between containers running together in a Pod","c":[{"t":"list_item","d":12,"p":{"lines":[79,80]},"v":"Volume can be mounted to mutiple containers inside a Pod"}]}]},{"t":"list_item","d":8,"p":{"lines":[80,81]},"v":"type","c":[{"t":"list_item","d":10,"p":{"lines":[81,82]},"v":"configMap"},{"t":"list_item","d":10,"p":{"lines":[82,83]},"v":"emptyDir"},{"t":"list_item","d":10,"p":{"lines":[83,84]},"v":"hostPath"},{"t":"list_item","d":10,"p":{"lines":[84,85]},"v":"local"},{"t":"list_item","d":10,"p":{"lines":[85,86]},"v":"persistentVolumeClaim"}]}]}]},{"t":"list_item","d":4,"p":{"lines":[86,87]},"v":"Policies","c":[{"t":"list_item","d":6,"p":{"lines":[87,88]},"v":"ResourceQuota","c":[{"t":"list_item","d":8,"p":{"lines":[88,89]},"v":"purpose","c":[{"t":"list_item","d":10,"p":{"lines":[89,90]},"v":"Limit the aggregated resource consumption of a Namespace"}]},{"t":"list_item","d":8,"p":{"lines":[90,91]},"v":"Scope","c":[{"t":"list_item","d":10,"p":{"lines":[91,92]},"v":"Namespaced: ResourceQuota is enforced in a Namespace scope, different Namespaces have different Resouce limit"}]},{"t":"list_item","d":8,"p":{"lines":[92,93]},"v":"Type","c":[{"t":"list_item","d":10,"p":{"lines":[93,94]},"v":"Compute Resource Quota","c":[{"t":"list_item","d":12,"p":{"lines":[94,95]},"v":"CPU (limits.cpu requests.cpu)"},{"t":"list_item","d":12,"p":{"lines":[95,96]},"v":"Memory (limits.memory requets.memory)"}]},{"t":"list_item","d":10,"p":{"lines":[96,97]},"v":"Storage Resource Quota","c":[{"t":"list_item","d":12,"p":{"lines":[97,98]},"v":"Persistent Storage (storage)"},{"t":"list_item","d":12,"p":{"lines":[98,99]},"v":"Ephemeral Storage (ephermal-storage)"}]},{"t":"list_item","d":10,"p":{"lines":[99,100]},"v":"Object Count Quota","c":[{"t":"list_item","d":12,"p":{"lines":[100,101]},"v":"Limit of total number of Namespaced resources (count/services)"}]}]},{"t":"list_item","d":8,"p":{"lines":[101,102]},"v":"Request and Limit","c":[{"t":"list_item","d":10,"p":{"lines":[102,103]},"v":"Request: Resources that are guaranteed to get"},{"t":"list_item","d":10,"p":{"lines":[103,104]},"v":"Limit: The maximum amount of resources that one can get"}]}]}]},{"t":"list_item","d":4,"p":{"lines":[104,105]},"v":"Network","c":[{"t":"list_item","d":6,"p":{"lines":[105,106]},"v":"Linux Network Virtualization","c":[{"t":"list_item","d":8,"p":{"lines":[106,107]},"v":"<a href=\"https://zhaohuabing.com/post/2020-02-24-linux-taptun/\">Linux tun/tap</a>"}]},{"t":"list_item","d":6,"p":{"lines":[107,108]},"v":"<a href=\"https://zhaohuabing.com/post/2020-03-12-linux-network-virtualization/#network-namespace\">Network Namespace</a>"},{"t":"list_item","d":6,"p":{"lines":[108,109]},"v":"<a href=\"https://zhaohuabing.com/post/2020-03-12-linux-network-virtualization/#veth\">Veth Pair</a>"},{"t":"list_item","d":6,"p":{"lines":[109,110]},"v":"<a href=\"https://zhaohuabing.com/post/2020-03-12-linux-network-virtualization/#bridge\">Linux bridge</a>"},{"t":"list_item","d":6,"p":{"lines":[110,111]},"v":"Vlan"},{"t":"list_item","d":6,"p":{"lines":[111,112]},"v":"Vxlan","c":[{"t":"list_item","d":8,"p":{"lines":[112,113]},"v":"<a href=\"https://cizixs.com/2017/09/25/vxlan-protocol-introduction/\">Vxlan原理</a>"},{"t":"list_item","d":8,"p":{"lines":[113,114]},"v":"<a href=\"https://cizixs.com/2017/09/28/linux-vxlan/\">Linux 上实现 vxlan 网络</a>"}]},{"t":"list_item","d":6,"p":{"lines":[114,115]},"v":"Routing Protocol","c":[{"t":"list_item","d":8,"p":{"lines":[115,116]},"v":"Distance Vector Protocol","c":[{"t":"list_item","d":10,"p":{"lines":[116,117]},"v":"BGP"}]},{"t":"list_item","d":8,"p":{"lines":[117,118]},"v":"Link-State Protocol","c":[{"t":"list_item","d":10,"p":{"lines":[118,119]},"v":"OSPF"}]}]},{"t":"list_item","d":6,"p":{"lines":[119,120]},"v":"K8s Network","c":[{"t":"list_item","d":8,"p":{"lines":[120,121]},"v":"Service","c":[{"t":"list_item","d":10,"p":{"lines":[121,122]},"v":"<a href=\"https://zhaohuabing.com/post/2019-03-29-how-to-choose-ingress-for-service-mesh/#cluster-ip\">Cluster IP</a>","c":[{"t":"list_item","d":12,"p":{"lines":[122,123]},"v":"Provides access in the cluster internally"},{"t":"list_item","d":12,"p":{"lines":[123,124]},"v":"The ClusterIP range is defined in API server startup option <code>-service-cluster-ip-range</code>"},{"t":"list_item","d":12,"p":{"lines":[124,125]},"v":"Service port is defined in the Service Manifest"}]},{"t":"list_item","d":10,"p":{"lines":[125,126]},"v":"<a href=\"https://zhaohuabing.com/post/2019-03-29-how-to-choose-ingress-for-service-mesh/#nodeport\">NodePort</a>","c":[{"t":"list_item","d":12,"p":{"lines":[126,127]},"v":"Provides access at the node level"},{"t":"list_item","d":12,"p":{"lines":[127,128]},"v":"The NodePort range is defined in API server startup option <code>--service-node-port-range</code>"}]},{"t":"list_item","d":10,"p":{"lines":[128,129]},"v":"<a href=\"https://zhaohuabing.com/post/2019-03-29-how-to-choose-ingress-for-service-mesh/#loadbalancer\">LoadBalancer</a>","c":[{"t":"list_item","d":12,"p":{"lines":[129,130]},"v":"Provides an external IP to allow access from outside of the cluster"}]},{"t":"list_item","d":10,"p":{"lines":[130,131]},"v":"<a href=\"https://kubernetes.io/docs/concepts/services-networking/service/#externalname\">ExternalName</a>","c":[{"t":"list_item","d":12,"p":{"lines":[131,132]},"v":"An alias to an external service"},{"t":"list_item","d":12,"p":{"lines":[132,133]},"v":"DNS redirection"}]},{"t":"list_item","d":10,"p":{"lines":[133,134]},"v":"<a href=\"https://zhaohuabing.com/post/2020-09-11-headless-mtls/#%E4%BB%80%E4%B9%88%E6%98%AF%E6%97%A0%E5%A4%B4%E6%9C%8D%E5%8A%A1\">Headless</a>","c":[{"t":"list_item","d":12,"p":{"lines":[134,135]},"v":"Define a Headless service: specify &quot;None&quot; in for the cluster IP(.spec.clusterIP)"},{"t":"list_item","d":12,"p":{"lines":[135,136]},"v":"No cluster IP allocated to Headless services"},{"t":"list_item","d":12,"p":{"lines":[136,137]},"v":"No load balancing and proxying for Headless service"},{"t":"list_item","d":12,"p":{"lines":[137,138]},"v":"Kube dns returns the IP of the pods backing the service"}]}]},{"t":"list_item","d":8,"p":{"lines":[138,139]},"v":"<a href=\"https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#proxy\">Kube Proxy</a>","c":[{"t":"list_item","d":10,"p":{"lines":[139,140]},"v":"Provides a proxy server or appliction-level gateway between localhost and the K8s API server"},{"t":"list_item","d":10,"p":{"lines":[140,141]},"v":"Handles locating the apiserver and authenticating (uses cluster configuration and user credential in .kube/config)"},{"t":"list_item","d":10,"p":{"lines":[141,142]},"v":"Can send requests to API server (for example: get the list of services in default namespace <code>localhost:proxy-port/api/v1/namespaces/default/services</code>)"},{"t":"list_item","d":10,"p":{"lines":[142,143]},"v":"Can send requests to services via url <code>localhost:proxy-port/api/v1/namespaces/namespace_name/services/service_name[:port_name]/proxy/[application url]</code>"}]},{"t":"list_item","d":8,"p":{"lines":[143,144]},"v":"Kubectl port-forward","c":[{"t":"list_item","d":10,"p":{"lines":[144,145]},"v":"Forward local ports to a pod"},{"t":"list_item","d":10,"p":{"lines":[145,146]},"v":"kebectl port-forward deployment/mydeployment localport:port"},{"t":"list_item","d":10,"p":{"lines":[146,147]},"v":"kebectl port-forward service/myservice localport:port"},{"t":"list_item","d":10,"p":{"lines":[147,148]},"v":"kebectl port-forward pod/mypod localport:port"}]},{"t":"list_item","d":8,"p":{"lines":[148,149]},"v":"Ingress","c":[{"t":"list_item","d":10,"p":{"lines":[149,150]},"v":"<a href=\"https://zhaohuabing.com/post/2019-03-29-how-to-choose-ingress-for-service-mesh/#k8s-ingress\">K8s Ingress</a>"},{"t":"list_item","d":10,"p":{"lines":[150,151]},"v":"<a href=\"https://zhaohuabing.com/post/2019-03-29-how-to-choose-ingress-for-service-mesh/#istio-gateway\">Istio Ingress Gateway</a>"}]},{"t":"list_item","d":8,"p":{"lines":[151,152]},"v":"DNS","c":[{"t":"list_item","d":10,"p":{"lines":[152,153]},"v":"<a href=\"https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#services\">Service</a>","c":[{"t":"list_item","d":12,"p":{"lines":[153,154]},"v":"Normal Service","c":[{"t":"list_item","d":14,"p":{"lines":[154,155]},"v":"A/AAA record which resolves name to the Cluster IP","c":[{"t":"list_item","d":16,"p":{"lines":[155,156]},"v":"Name: <code>my-svc.my-namespace.svc.cluster-domain.example</code>"},{"t":"list_item","d":16,"p":{"lines":[156,157]},"v":"Example: <code>kubernetes.default.svc.cluster.local. 30 IN A 172.20.252.11</code>"}]},{"t":"list_item","d":14,"p":{"lines":[157,158]},"v":"SRV record for each named service port","c":[{"t":"list_item","d":16,"p":{"lines":[158,159]},"v":"Name: <code>_my-port-name._my-port-protocol.my-svc.my-namespace.svc.cluster-domain.</code>example"},{"t":"list_item","d":16,"p":{"lines":[159,160]},"v":"Example: <code>_https._tcp.kubernetes.default.svc.cluster.local. 5 IN SRV 0 100 443 kubernetes.default.svc.cluster.local.</code>"}]},{"t":"list_item","d":14,"p":{"lines":[160,161]},"v":"A PTR record which resolves Cluster IP to domain name","c":[{"t":"list_item","d":16,"p":{"lines":[161,162]},"v":"Example <code>1.252.20.172.in-addr.arpa. 5 IN PTR kubernetes.default.svc.cluster.local.</code>"}]}]},{"t":"list_item","d":12,"p":{"lines":[162,163]},"v":"Headless Service","c":[{"t":"list_item","d":14,"p":{"lines":[163,164]},"v":"A/AAA record which resolves to the set of IPs of the pods selected by the service"},{"t":"list_item","d":14,"p":{"lines":[164,165]},"v":"N*M SRV records (N pods, M named ports in service)"},{"t":"list_item","d":14,"p":{"lines":[165,166]},"v":"A PTR record which resolves pod IP to domain name of each pod"}]},{"t":"list_item","d":12,"p":{"lines":[166,167]},"v":"ExternalName","c":[{"t":"list_item","d":14,"p":{"lines":[167,168]},"v":"A CNAME pointing to the domain name of the external service"}]}]},{"t":"list_item","d":10,"p":{"lines":[168,169]},"v":"Pod","c":[{"t":"list_item","d":12,"p":{"lines":[169,170]},"v":"A/AAA record which resolves name to the pod IP"},{"t":"list_item","d":12,"p":{"lines":[170,171]},"v":"General name","c":[{"t":"list_item","d":14,"p":{"lines":[171,172]},"v":"Name: <code>pod-ip-address.my-namespace.pod.cluster-domain.example</code>"},{"t":"list_item","d":14,"p":{"lines":[172,173]},"v":"Example: <code>172-20-0-57.default.pod.cluster.local. 3 IN A 172.20.0.57</code>"}]},{"t":"list_item","d":12,"p":{"lines":[173,174]},"v":"Pod created by Deployment or DaemonSet exposed by a Service","c":[{"t":"list_item","d":14,"p":{"lines":[174,175]},"v":"<code>pod-ip-address.deployment-name.my-namespace.svc.cluster-domain.example</code>"},{"t":"list_item","d":14,"p":{"lines":[175,176]},"v":""}]}]},{"t":"list_item","d":10,"p":{"lines":[176,177]},"v":"<a href=\"https://kubernetes.io/docs/tasks/administer-cluster/dns-custom-nameservers/#coredns\">CoreDNS</a>","c":[{"t":"list_item","d":12,"p":{"lines":[177,178]},"v":"Plugins","c":[{"t":"list_item","d":14,"p":{"lines":[178,179]},"v":"errors: Erros are logged to stdout"},{"t":"list_item","d":14,"p":{"lines":[179,180]},"v":"prometheus: Metrics of CoreDNS are available at <code>http://localhost:9153/metrics</code> in Prometheus format"},{"t":"list_item","d":14,"p":{"lines":[180,181]},"v":"<a href=\"https://coredns.io/plugins/kubernetes/\">kubernetes</a>: CoreDNS will reply to DNS queries based on IP of the services and pods of Kubernetes."}]}]}]},{"t":"list_item","d":8,"p":{"lines":[181,182]},"v":"腾讯云","c":[{"t":"list_item","d":10,"p":{"lines":[182,183]},"v":"<a href=\"https://zhaohuabing.com/post/2021-03-24-tke-network-mode/#global-router-%E6%A8%A1%E5%BC%8F\">Global Router</a>"},{"t":"list_item","d":10,"p":{"lines":[183,184]},"v":"<a href=\"https://zhaohuabing.com/post/2021-03-24-tke-network-mode/#vpc-cni-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F\">VPC-CNI</a>"}]},{"t":"list_item","d":8,"p":{"lines":[184,185]},"v":"<a href=\"https://zhaohuabing.com/post/2019-03-29-how-to-choose-ingress-for-service-mesh/#api-gateway--sidecar-proxy\">API Gateway+Service Mesh</a>"},{"t":"list_item","d":8,"p":{"lines":[185,186]},"v":"Kubernetes CNI插件","c":[{"t":"list_item","d":10,"p":{"lines":[186,187]},"v":"<a href=\"https://www.lijiaocn.com/%E9%A1%B9%E7%9B%AE/2017/04/11/calico-usage.html\">Calico</a>"}]}]}]},{"t":"list_item","d":4,"p":{"lines":[187,188]},"v":"Scheduling","c":[{"t":"list_item","d":6,"p":{"lines":[188,189]},"v":"Algorithm: Predicate find a set of available nodes -&gt; Priority select the best suitable node","c":[{"t":"list_item","d":8,"p":{"lines":[189,190]},"v":"Predicates: find available nodes through some conditions: check memory, cpu, disk, etc."},{"t":"list_item","d":8,"p":{"lines":[190,191]},"v":"Priorities: select a node to run the scheduled pod: select the node with the least amount of pods by default"},{"t":"list_item","d":8,"p":{"lines":[191,192]},"v":"Policy: specify a number of predicates and priorities"}]},{"t":"list_item","d":6,"p":{"lines":[192,193]},"v":"Run a customscheduler","c":[{"t":"list_item","d":8,"p":{"lines":[193,194]},"v":"Policy: <code>--policy-config-file</code>"},{"t":"list_item","d":8,"p":{"lines":[194,195]},"v":"Name: <code>--scheduler-name</code>"}]},{"t":"list_item","d":6,"p":{"lines":[195,196]},"v":"Pod Specification: hits for pod scheduling","c":[{"t":"list_item","d":8,"p":{"lines":[196,197]},"v":"NodeName: assign pods to the named node"},{"t":"list_item","d":8,"p":{"lines":[197,198]},"v":"NodeSelector: assign pods to a group of nodes with particular labels"},{"t":"list_item","d":8,"p":{"lines":[198,199]},"v":"Affinity and anti-affinity:","c":[{"t":"list_item","d":10,"p":{"lines":[199,200]},"v":"Node","c":[{"t":"list_item","d":12,"p":{"lines":[200,201]},"v":"Node affinity: has the same ability to constrain pods to particular nodes, but is more expressive and powerful"},{"t":"list_item","d":12,"p":{"lines":[201,202]},"v":"Node anti-affinity: use <code>NotIn</code> and <code>DoesNotExist</code> to achieve node anti-affinity"}]},{"t":"list_item","d":10,"p":{"lines":[202,203]},"v":"Inter-Pod","c":[{"t":"list_item","d":12,"p":{"lines":[203,204]},"v":"Inter-Pod affinity: co-locate some pods in the same nodes"},{"t":"list_item","d":12,"p":{"lines":[204,205]},"v":"Inter-Pod anti-affinity: distribute some pods in different nodes"}]}]},{"t":"list_item","d":8,"p":{"lines":[205,206]},"v":"taints and tolerations","c":[{"t":"list_item","d":10,"p":{"lines":[206,207]},"v":"allow a node to repel a set of pods"},{"t":"list_item","d":10,"p":{"lines":[207,208]},"v":"allow pods to be scheduled onto nodes with matching taints"}]},{"t":"list_item","d":8,"p":{"lines":[208,209]},"v":"SchedulerName: choose a specific scheduler to schedule a pod"}]}]},{"t":"list_item","d":4,"p":{"lines":[209,210]},"v":"Security","c":[{"t":"list_item","d":6,"p":{"lines":[210,211]},"v":"Background Knowledge","c":[{"t":"list_item","d":8,"p":{"lines":[211,212]},"v":"<a href=\"https://zhaohuabing.com/post/2020-03-19-pki/\">Certificate and PKI</a>"},{"t":"list_item","d":8,"p":{"lines":[212,213]},"v":"<a href=\"https://zhaohuabing.com/post/2020-05-19-k8s-certificate/\">Kubernetes 中使用到的证书</a>"}]},{"t":"list_item","d":6,"p":{"lines":[213,214]},"v":"User Type","c":[{"t":"list_item","d":8,"p":{"lines":[214,215]},"v":"Service Account","c":[{"t":"list_item","d":10,"p":{"lines":[215,216]},"v":"Managed by Kubernetes"},{"t":"list_item","d":10,"p":{"lines":[216,217]},"v":"Represent workloads in the cluster"},{"t":"list_item","d":10,"p":{"lines":[217,218]},"v":"Bound to a specific namespace"}]},{"t":"list_item","d":8,"p":{"lines":[218,219]},"v":"<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/certificate-signing-requests/#normal-user\">Normal User</a>","c":[{"t":"list_item","d":10,"p":{"lines":[219,220]},"v":"Managed out side of Kubernetes"},{"t":"list_item","d":10,"p":{"lines":[220,221]},"v":"Authenticated with a valid certicated signed by the cluster's CA","c":[{"t":"list_item","d":12,"p":{"lines":[221,222]},"v":"User name: Certificate subject <a href=\"https://docs.oracle.com/cd/E24191_01/common/tutorials/authz_cert_attributes.html\">Common Name</a> field"},{"t":"list_item","d":12,"p":{"lines":[222,223]},"v":"Group: Certificate subject <a href=\"https://docs.oracle.com/cd/E24191_01/common/tutorials/authz_cert_attributes.html\">Organization</a> field"}]}]}]},{"t":"list_item","d":6,"p":{"lines":[223,224]},"v":"Authentication","c":[{"t":"list_item","d":8,"p":{"lines":[224,225]},"v":"Service account tokens for service accounts"},{"t":"list_item","d":8,"p":{"lines":[225,226]},"v":"Client certifications for normal users"},{"t":"list_item","d":8,"p":{"lines":[226,227]},"v":"<a href=\"https://zhaohuabing.com/post/2020-05-19-k8s-certificate/#service-account--%E8%AF%81%E4%B9%A6\">Certifications for control plane components communication</a>"},{"t":"list_item","d":8,"p":{"lines":[227,228]},"v":"<a href=\"https://zhaohuabing.com/post/2020-05-19-k8s-certificate/#%E4%BD%BF%E7%94%A8-tls-bootstrapping-%E7%AE%80%E5%8C%96-kubelet-%E8%AF%81%E4%B9%A6%E5%88%B6%E4%BD%9C\">Bootstrap Token</a> for clusters and nodes bootstrapping"}]},{"t":"list_item","d":6,"p":{"lines":[228,229]},"v":"Authorization","c":[{"t":"list_item","d":8,"p":{"lines":[229,230]},"v":"<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/rbac/\">RBAC</a>","c":[{"t":"list_item","d":10,"p":{"lines":[230,231]},"v":"Namespace Scope","c":[{"t":"list_item","d":12,"p":{"lines":[231,232]},"v":"Role"},{"t":"list_item","d":12,"p":{"lines":[232,233]},"v":"RoleBinding (Associate users retrived from authentication process to Roles)"}]},{"t":"list_item","d":10,"p":{"lines":[233,234]},"v":"Cluster Scope","c":[{"t":"list_item","d":12,"p":{"lines":[234,235]},"v":"ClusterRole"},{"t":"list_item","d":12,"p":{"lines":[235,236]},"v":"CluseterRoleBinding (Associate users retrived from authentication process to ClusteRoles)"}]}]}]}]},{"t":"list_item","d":4,"p":{"lines":[236,237]},"v":"Helm: package management tool for K8s applications","c":[{"t":"list_item","d":6,"p":{"lines":[237,238]},"v":"Chart: package all k8s manifests as a single tarball","c":[{"t":"list_item","d":8,"p":{"lines":[238,239]},"v":"Chart.yaml: this files contains metadata about this Chart: name, version, keywords"},{"t":"list_item","d":8,"p":{"lines":[239,240]},"v":"templeates: this directorey contains the resource manifests that makes up this application","c":[{"t":"list_item","d":10,"p":{"lines":[240,241]},"v":"deployment"},{"t":"list_item","d":10,"p":{"lines":[241,242]},"v":"services"},{"t":"list_item","d":10,"p":{"lines":[242,243]},"v":"secretes"},{"t":"list_item","d":10,"p":{"lines":[243,244]},"v":"..."}]},{"t":"list_item","d":8,"p":{"lines":[244,245]},"v":"values.yaml: this files contains keys and values that are used to generate the release. These values are replaced in the resource manifests using the Go template syntax"}]},{"t":"list_item","d":6,"p":{"lines":[245,246]},"v":"Repository: HTTP servers that contains charts"},{"t":"list_item","d":6,"p":{"lines":[246,247]},"v":"Helm commands","c":[{"t":"list_item","d":8,"p":{"lines":[247,248]},"v":"helm search hub redis: find redis chart and its repository in helm hub"},{"t":"list_item","d":8,"p":{"lines":[248,249]},"v":"helm sarch repo redis: find redis chart in repositories"},{"t":"list_item","d":8,"p":{"lines":[249,250]},"v":"helm install redis bitnami/redis: install redis chart"}]},{"t":"list_item","d":6,"p":{"lines":[250,251]},"v":"Extending the Kubernetes API","c":[{"t":"list_item","d":8,"p":{"lines":[251,252]},"v":"Custom Resource","c":[{"t":"list_item","d":10,"p":{"lines":[252,253]},"v":"CRD: Define custom resources"},{"t":"list_item","d":10,"p":{"lines":[253,254]},"v":"Custom Resources/Ojbects: Declare the desired spec of a custom resource"},{"t":"list_item","d":10,"p":{"lines":[254,255]},"v":"Custom Controllers: watch-loop to make sure the actual state meet the declared spec"}]},{"t":"list_item","d":8,"p":{"lines":[255,256]},"v":"<a href=\"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/\">Aggregated API Server</a>","c":[{"t":"list_item","d":10,"p":{"lines":[256,257]},"v":"Deploy an extension API server"},{"t":"list_item","d":10,"p":{"lines":[257,258]},"v":"<a href=\"https://kubernetes.io/docs/tasks/extend-kubernetes/configure-aggregation-layer/\">Register APIService objects</a>","c":[{"t":"list_item","d":12,"p":{"lines":[258,259]},"v":"Group: API groups this extension API server hosts"},{"t":"list_item","d":12,"p":{"lines":[259,260]},"v":"Version: API version this extension API server hosts"}]},{"t":"list_item","d":10,"p":{"lines":[260,261]},"v":"kube-apiserver proxies client requests to the extension API server"}]}]}]}]})</script>
</body>
</html>
